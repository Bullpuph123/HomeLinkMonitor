<Window x:Class="HomeLinkMonitor.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings - HomeLink Monitor"
        Width="550" Height="580"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource BackgroundBrush}"
        Foreground="{DynamicResource TextPrimaryBrush}">

    <Window.Resources>
        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Margin" Value="0,8,0,3" />
        </Style>
        <Style x:Key="FieldInput" TargetType="TextBox">
            <Setter Property="Background" Value="{DynamicResource SurfaceLightBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="Padding" Value="6,4" />
            <Setter Property="FontSize" Value="13" />
        </Style>
        <Style x:Key="FieldCheckBox" TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
            <Setter Property="Margin" Value="0,6,0,0" />
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0" Background="Transparent" BorderThickness="0" Margin="10">
            <!-- General Tab -->
            <TabItem Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <TextBlock Text="General Settings" Style="{DynamicResource HeaderText}" Margin="0,0,0,10" />

                        <TextBlock Text="Polling Interval (seconds)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding PollingIntervalSeconds}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Theme" Style="{StaticResource FieldLabel}" />
                        <ComboBox SelectedItem="{Binding Theme}" Width="150" HorizontalAlignment="Left"
                                  Background="{DynamicResource SurfaceLightBrush}"
                                  Foreground="{DynamicResource TextPrimaryBrush}">
                            <ComboBoxItem Content="Dark" />
                            <ComboBoxItem Content="Light" />
                        </ComboBox>

                        <CheckBox Content="Start minimized" IsChecked="{Binding StartMinimized}" Style="{StaticResource FieldCheckBox}" />
                        <CheckBox Content="Minimize to system tray" IsChecked="{Binding MinimizeToTray}" Style="{StaticResource FieldCheckBox}" />
                        <CheckBox Content="Start with Windows" IsChecked="{Binding StartWithWindows}" Style="{StaticResource FieldCheckBox}" />
                        <CheckBox Content="Show toast notifications" IsChecked="{Binding ShowNotifications}" Style="{StaticResource FieldCheckBox}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Monitoring Tab -->
            <TabItem Header="Monitoring">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <TextBlock Text="Monitoring Targets" Style="{DynamicResource HeaderText}" Margin="0,0,0,10" />

                        <TextBlock Text="Primary DNS Server" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding PrimaryDns}" Style="{StaticResource FieldInput}" Width="200" HorizontalAlignment="Left" />

                        <TextBlock Text="Secondary DNS Server" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding SecondaryDns}" Style="{StaticResource FieldInput}" Width="200" HorizontalAlignment="Left" />

                        <TextBlock Text="Ping Timeout (ms)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding PingTimeoutMs}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="DNS Query Domain" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding DnsQueryName}" Style="{StaticResource FieldInput}" Width="200" HorizontalAlignment="Left" />

                        <TextBlock Text="HTTP Probe URL" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding HttpProbeUrl}" Style="{StaticResource FieldInput}" />

                        <TextBlock Text="HTTP Timeout (ms)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding HttpTimeoutMs}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Custom Ping Targets (comma-separated)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding CustomPingTargets}" Style="{StaticResource FieldInput}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Alerts Tab -->
            <TabItem Header="Alerts">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <TextBlock Text="Alert Thresholds" Style="{DynamicResource HeaderText}" Margin="0,0,0,10" />

                        <TextBlock Text="Low Signal Threshold (%)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AlertSignalLowThreshold}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="High Latency Threshold (ms)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AlertLatencyHighMs}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Packet Loss Threshold (%)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AlertPacketLossPercent}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Alert Cooldown (seconds)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AlertCooldownSeconds}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Data Tab -->
            <TabItem Header="Data">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <TextBlock Text="Data Retention" Style="{DynamicResource HeaderText}" Margin="0,0,0,10" />

                        <TextBlock Text="Raw Data Retention (days)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding RawDataRetentionDays}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Aggregated Data Retention (days)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AggregatedRetentionDays}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />

                        <TextBlock Text="Alert Retention (days)" Style="{StaticResource FieldLabel}" />
                        <TextBox Text="{Binding AlertRetentionDays}" Style="{StaticResource FieldInput}" Width="100" HorizontalAlignment="Left" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- About Tab -->
            <TabItem Header="About">
                <StackPanel Margin="16" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="HomeLink Monitor" FontSize="24" FontWeight="Light"
                               Foreground="{DynamicResource AccentBrush}" HorizontalAlignment="Center" />
                    <TextBlock Text="v1.0.0" FontSize="14" Foreground="{DynamicResource TextSecondaryBrush}"
                               HorizontalAlignment="Center" Margin="0,4,0,16" />
                    <TextBlock Text="Wi-Fi Link Health &amp; Internet Connectivity Monitor"
                               Foreground="{DynamicResource TextSecondaryBrush}" HorizontalAlignment="Center" />
                    <TextBlock Text=".NET 8.0 + WPF" FontSize="11"
                               Foreground="{DynamicResource TextMutedBrush}" HorizontalAlignment="Center" Margin="0,8,0,0" />
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Bottom buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="16,8,16,16">
            <Button Content="Reset Defaults" Style="{DynamicResource SubtleButton}"
                    Command="{Binding ResetDefaultsCommand}" Margin="0,0,8,0" />
            <Button Content="Save" Style="{DynamicResource AccentButton}"
                    Command="{Binding SaveCommand}" Click="SaveButton_Click" />
        </StackPanel>
    </Grid>
</Window>
