<Window x:Class="HomeLinkMonitor.Views.MiniWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:HomeLinkMonitor.Converters"
        Title="HomeLink Mini"
        Width="300" Height="110"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="True"
        ResizeMode="NoResize"
        Background="Transparent"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseRightButtonDown="Window_MouseRightButtonDown">

    <Window.Resources>
        <conv:SignalToColorConverter x:Key="SignalToColor" />
        <conv:LatencyToColorConverter x:Key="LatencyToColor" />
        <conv:ConnectionStatusToColorConverter x:Key="StatusToColor" />
    </Window.Resources>

    <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="10" Padding="12,8"
            BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1.5" Opacity="0.95">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Top: Status + SSID -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,4">
                <Ellipse Width="8" Height="8"
                         Fill="{Binding OverallStatus, Converter={StaticResource StatusToColor}}"
                         Margin="0,0,6,0" VerticalAlignment="Center" />
                <TextBlock Text="{Binding Ssid}" Foreground="{DynamicResource TextPrimaryBrush}" FontSize="13" FontWeight="SemiBold"
                           VerticalAlignment="Center" />
                <TextBlock Text="{Binding StatusText}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="11"
                           Margin="8,0,0,0" VerticalAlignment="Center" />
            </StackPanel>

            <!-- Bottom: Metrics row -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Signal -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="SIGNAL" Foreground="{DynamicResource TextMutedBrush}" FontSize="9" />
                    <TextBlock FontSize="16" FontWeight="Medium"
                               Foreground="{Binding SignalQuality, Converter={StaticResource SignalToColor}}">
                        <Run Text="{Binding SignalQuality, Mode=OneWay}" /><Run Text="%" Foreground="{DynamicResource TextMutedBrush}" FontSize="10" />
                    </TextBlock>
                </StackPanel>

                <!-- Gateway -->
                <StackPanel Grid.Column="1">
                    <TextBlock Text="GATEWAY" Foreground="{DynamicResource TextMutedBrush}" FontSize="9" />
                    <TextBlock FontSize="16" FontWeight="Medium"
                               Foreground="{Binding GatewayLatency, Converter={StaticResource LatencyToColor}}">
                        <Run Text="{Binding GatewayLatency, StringFormat={}{0:F0}, Mode=OneWay}" /><Run Text="ms" Foreground="{DynamicResource TextMutedBrush}" FontSize="10" />
                    </TextBlock>
                </StackPanel>

                <!-- DNS -->
                <StackPanel Grid.Column="2">
                    <TextBlock Text="DNS" Foreground="{DynamicResource TextMutedBrush}" FontSize="9" />
                    <TextBlock FontSize="16" FontWeight="Medium"
                               Foreground="{Binding DnsLatency, Converter={StaticResource LatencyToColor}}">
                        <Run Text="{Binding DnsLatency, StringFormat={}{0:F0}, Mode=OneWay}" /><Run Text="ms" Foreground="{DynamicResource TextMutedBrush}" FontSize="10" />
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
